# 📋 图片元数据结构说明

## 🎯 概述
本文档详细说明了图片API中每张图片的元数据结构，包含所有字段的含义和数据类型。

## 📊 完整元数据字段

### 🔢 基本信息字段

| 字段名 | 数据类型 | 说明 | 示例值 |
|--------|----------|------|--------|
| `id` | number | 图片唯一标识符 | `43` |
| `dataset_id` | number | 所属数据集ID | `5` |
| `original_image_id` | number? | 原始图片ID（可选） | `null` |
| `original_filename` | string | 原始文件名 | `"建筑图片_0008.jpg"` |
| `minio_object_name` | string | MinIO存储对象名称 | `"dataset_5_20250904_111850/c2755be0322f469b8649f6fcc59bcf0c.jpg"` |
| `minio_url` | string | MinIO访问URL | `"http://192.10.222.123:9000/dataset/dataset_5_20250904_111850/c2755be0322f469b8649f6fcc59bcf0c.jpg"` |
| `filename` | string | 存储文件名 | `"c2755be0322f469b8649f6fcc59bcf0c.jpg"` |
| `file_size` | number | 文件大小（字节） | `245760` |
| `width` | number | 图片宽度（像素） | `1920` |
| `height` | number | 图片高度（像素） | `1080` |
| `format` | string | 图片格式 | `"JPG"` |

### 🏷️ 标签信息字段

| 字段名 | 数据类型 | 说明 | 示例值 |
|--------|----------|------|--------|
| `type_tags` | string[] | 类型标签数组 | `["建筑", "城市景观", "现代", "高楼", "商业"]` |
| `phrase_tags` | string[] | 短语标签数组 | `["现代建筑群", "城市天际线", "商业中心", "玻璃幕墙建筑"]` |
| `natural_tags` | string[] | 自然语言标签数组 | `["这是一张现代城市建筑群的照片", "包含多栋高楼大厦", "玻璃幕墙反射阳光"]` |

### 🤖 AI分析字段

| 字段名 | 数据类型 | 说明 | 示例值 |
|--------|----------|------|--------|
| `raw_annotation_data` | object | 原始标注数据 | `{"analysis": "...", "classified_tags": "...", "original_data": "..."}` |
| `annotation_method` | string | 标注方法 | `"auto"` |
| `annotation_model` | string | 使用的AI模型 | `"CLIP-ViT-B-32"` |
| `confidence_score` | number | 置信度分数 (0-1) | `0.85` |
| `quality_score` | number? | 质量分数 (可选) | `0.92` |

### ✅ 验证字段

| 字段名 | 数据类型 | 说明 | 示例值 |
|--------|----------|------|--------|
| `is_verified` | boolean | 是否已人工验证 | `false` |
| `verification_notes` | string? | 验证备注（可选） | `"标签准确，质量良好"` |

### 📝 元数据字段

| 字段名 | 数据类型 | 说明 | 示例值 |
|--------|----------|------|--------|
| `image_metadata` | object? | 图片EXIF等元数据（可选） | `{"camera": "Canon EOS R5", "lens": "24-70mm"}` |

### ⏰ 时间字段

| 字段名 | 数据类型 | 说明 | 示例值 |
|--------|----------|------|--------|
| `created_at` | string | 创建时间 (ISO 8601) | `"2025-09-04T03:19:01"` |
| `updated_at` | string | 更新时间 (ISO 8601) | `"2025-09-04T03:19:01"` |

## 🎨 实际示例

### 示例图片元数据 (ID: 43)

```json
{
  "id": 43,
  "dataset_id": 5,
  "original_image_id": null,
  "original_filename": "建筑图片_0008.jpg",
  "minio_object_name": "dataset_5_20250904_111850/c2755be0322f469b8649f6fcc59bcf0c.jpg",
  "minio_url": "http://192.10.222.123:9000/dataset/dataset_5_20250904_111850/c2755be0322f469b8649f6fcc59bcf0c.jpg",
  "filename": "c2755be0322f469b8649f6fcc59bcf0c.jpg",
  "file_size": 0,
  "width": 0,
  "height": 0,
  "format": "JPG",
  "type_tags": ["建筑", "城市景观", "现代", "高楼", "商业"],
  "phrase_tags": [
    "现代建筑群",
    "城市天际线", 
    "商业中心",
    "玻璃幕墙建筑",
    "高层办公楼"
  ],
  "natural_tags": [
    "这是一张现代城市建筑群的照片",
    "包含多栋高楼大厦",
    "玻璃幕墙反射阳光",
    "典型的商业区景观"
  ],
  "raw_annotation_data": {
    "analysis": "图像分析结果",
    "classified_tags": "分类标签",
    "original_data": "原始数据"
  },
  "annotation_method": "auto",
  "annotation_model": "",
  "confidence_score": 0.0,
  "quality_score": null,
  "is_verified": false,
  "verification_notes": null,
  "image_metadata": null,
  "created_at": "2025-09-04T03:19:01",
  "updated_at": "2025-09-04T03:19:01"
}
```

## 🔍 字段详细说明

### 标签系统
- **type_tags**: 基础分类标签，用于快速分类
- **phrase_tags**: 描述性短语，更具体的描述
- **natural_tags**: 自然语言描述，提供详细说明

### 存储系统
- **MinIO**: 使用MinIO作为对象存储
- **文件命名**: 使用UUID确保唯一性
- **路径结构**: `dataset_{id}_{timestamp}/{uuid}.{ext}`

### AI分析
- **自动标注**: 使用AI模型自动生成标签
- **置信度**: 表示AI分析的可靠性
- **质量评估**: 对图片质量的评分

### 验证流程
- **人工验证**: 标记为已验证的图片经过人工审核
- **验证备注**: 记录验证过程中的发现

## 🚀 使用建议

1. **搜索优化**: 使用 `type_tags` 进行快速筛选
2. **详细搜索**: 使用 `phrase_tags` 和 `natural_tags` 进行语义搜索
3. **质量筛选**: 根据 `confidence_score` 和 `quality_score` 筛选高质量图片
4. **验证状态**: 优先使用 `is_verified: true` 的图片
5. **时间排序**: 使用 `created_at` 和 `updated_at` 进行时间排序

## 📈 数据统计

- **总图片数**: 50张
- **数据集数**: 多个数据集
- **标注方法**: 主要使用自动标注
- **验证状态**: 大部分图片待验证
- **格式分布**: 主要为JPG格式
