# 📋 服务器图片元数据完整列表

## 🎯 概述
本文档列出了从服务器API获取的图片的所有元数据字段，包括字段类型、含义和示例值。

## 📊 基础信息字段

### 1. 标识符字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `id` | number | 图片唯一标识符 | `1` | 数据库主键 |
| `dataset_id` | number | 所属数据集ID | `1` | 数据集标识 |
| `original_image_id` | number? | 原始图片ID | `null` | 可选字段，通常为空 |

### 2. 文件信息字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `filename` | string | 存储文件名 | `078d099539154d37a8e2d96bac46e980.jpg` | UUID格式的存储文件名 |
| `original_filename` | string | 原始文件名 | `建筑图片_0008.jpg` | 用户上传时的文件名 |
| `minio_object_name` | string | MinIO对象名 | `dataset_1_20250903_165635/078d099539154d37a8e2d96bac46e980.jpg` | 对象存储路径 |
| `minio_url` | string | 图片访问URL | `http://192.10.222.123:9000/dataset/dataset_1_20250903_165635/078d099539154d37a8e2d96bac46e980.jpg` | 完整访问地址 |

### 3. 图片属性字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `file_size` | number | 文件大小(字节) | `0` | 当前API返回0，可能未设置 |
| `width` | number | 图片宽度(像素) | `0` | 当前API返回0，可能未设置 |
| `height` | number | 图片高度(像素) | `0` | 当前API返回0，可能未设置 |
| `format` | string | 图片格式 | `JPG` | 文件格式标识 |

## 🏷️ AI标注标签字段

### 4. 分类标签字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `type_tags` | string[] | 基础分类标签 | `["办公楼", "现代主义", "城市", "阳光", "下午"]` | AI自动分类的基础标签 |
| `phrase_tags` | string[] | 描述性短语标签 | `["超写实照片，现代办公楼..."]` | AI生成的描述性短语 |
| `natural_tags` | string[] | 自然语言标签 | `["这张照片展示了一座高度现代化的办公楼..."]` | AI生成的详细描述 |

### 5. 标注元数据字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `annotation_method` | string | 标注方法 | `auto` | 标注方式：auto/manual |
| `annotation_model` | string? | 标注模型 | `null` | 使用的AI模型名称 |
| `confidence_score` | number | 置信度分数 | `0.0` | AI标注的置信度(0-1) |
| `quality_score` | number? | 质量分数 | `null` | 图片质量评分 |

## 🔍 原始标注数据字段

### 6. 复杂标注数据
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `raw_annotation_data` | object | 原始标注数据 | 复杂对象 | 包含完整的AI标注信息 |

#### raw_annotation_data 结构
```json
{
  "analysis": "",  // 分析结果
  "classified_tags": {
    "typeTags": [
      {
        "zh": "办公楼",
        "en": "OFFICE BUILDING"
      }
    ],
    "phraseTags": [
      {
        "zh": "超写实照片，现代办公楼...",
        "en": "Ultra-realistic photo, a modern office building..."
      }
    ],
    "naturalTags": [
      {
        "zh": "这张照片展示了一座高度现代化的办公楼...",
        "en": "This photo showcases a highly modern office building..."
      }
    ]
  },
  "original_data": {
    "image_name": "建筑图片_0008.jpg",
    "image_url": "http://localhost:8001/api/v1/crawler/image/...",
    "filename": "建筑图片_0008.jpg",
    "file_size": 0,
    "width": 0,
    "height": 0,
    "tags": ["建筑", "现代", "城市", "阳光"],
    "classified_tags": { /* 同上结构 */ },
    "annotation": "<|begin_of_box|>...</|end_of_box|>"
  }
}
```

## ✅ 验证和质量字段

### 7. 验证信息字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `is_verified` | boolean | 是否已验证 | `false` | 人工验证状态 |
| `verification_notes` | string? | 验证备注 | `null` | 验证过程中的备注 |

### 8. 扩展元数据字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `image_metadata` | any | 图片元数据 | `null` | EXIF等图片元数据 |

## ⏰ 时间戳字段

### 9. 时间信息字段
| 字段名 | 类型 | 含义 | 示例值 | 说明 |
|--------|------|------|--------|------|
| `created_at` | string | 创建时间 | `2025-09-03T08:56:35` | ISO 8601格式 |
| `updated_at` | string | 更新时间 | `2025-09-03T08:56:35` | ISO 8601格式 |

## 📈 数据统计

### 字段分类统计
- **基础信息**: 8个字段
- **AI标注**: 6个字段  
- **验证质量**: 3个字段
- **时间信息**: 2个字段
- **总计**: 19个主要字段

### 数据完整性状态
- ✅ **完整字段**: id, dataset_id, filename, original_filename, format, type_tags, phrase_tags, natural_tags, annotation_method, created_at, updated_at
- ⚠️ **部分完整**: minio_object_name, minio_url, raw_annotation_data
- ❌ **缺失字段**: file_size, width, height, annotation_model, confidence_score, quality_score, is_verified, verification_notes, image_metadata

## 🔧 使用建议

### 1. 数据验证
- 检查关键字段的完整性
- 验证AI标注数据的质量
- 确认图片访问URL的有效性

### 2. 显示优化
- 优先显示完整字段
- 对缺失字段提供友好提示
- 使用fallback值处理空数据

### 3. 性能考虑
- `raw_annotation_data` 字段较大，考虑按需加载
- 缓存常用的标签数据
- 异步加载图片元数据

## 🚀 扩展建议

### 1. 新增字段
- 图片哈希值
- 压缩质量信息
- 地理位置信息
- 拍摄设备信息

### 2. 数据优化
- 完善缺失的尺寸信息
- 提高AI标注质量
- 增加人工验证流程
- 优化存储结构
